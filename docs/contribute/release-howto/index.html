<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<title data-react-helmet="true">Release Howto | Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://sequentech.github.io/documentation/docs/contribute/release-howto"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Release Howto | Documentation"><meta data-react-helmet="true" name="description" content="In this howto we will explain how can a new release be published step by step."><meta data-react-helmet="true" property="og:description" content="In this howto we will explain how can a new release be published step by step."><link data-react-helmet="true" rel="shortcut icon" href="/documentation/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://sequentech.github.io/documentation/docs/contribute/release-howto"><link data-react-helmet="true" rel="alternate" href="https://sequentech.github.io/documentation/docs/contribute/release-howto" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://sequentech.github.io/documentation/docs/contribute/release-howto" hreflang="x-default"><link rel="stylesheet" href="/documentation/assets/css/styles.4f4b1b05.css">
<link rel="preload" href="/documentation/assets/js/runtime~main.d66f2ac7.js" as="script">
<link rel="preload" href="/documentation/assets/js/main.17bc2a39.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/documentation/"><img src="/documentation/img/sequent_logo.png" alt="Sequent" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/documentation/img/sequent_logo.png" alt="Sequent" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a></div><div class="navbar__items navbar__items--right"><a href="https://sequentech.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/sequentech/roadmap/discussions" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://join.slack.com/t/sequentech/shared_invite/zt-1bve9z0px-IF4Je04NJM8AEkCAcdBVWg" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/sequentech/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/documentation/docs/overview">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Guides</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Concepts</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reference</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Contribute</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/docs/contribute/guide">Contribution Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/docs/contribute/release-lifecycle">Release lifecycle and cadence</a></li><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/documentation/docs/contribute/release-howto">Release Howto</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1>Release Howto</h1></header><p>In this howto we will explain how can a new release be published step by step.
Please refer to the <a href="/documentation/docs/contribute/release-lifecycle">Release Lifecycle</a> document to
know more about when to do what type of release.</p><header><h1>Setup</h1></header><p>Releases are managed using the
<a href="https://github.com/sequentech/release-tool" target="_blank" rel="noopener noreferrer">release-tool project</a>. Each
repository can be released independently.</p><p>Please install and setup release-tool as described in the repository&#x27;s
README file.</p><header><h1>Release commands</h1></header><p>Publishing a release is actually compromised of multiple (and sometimes
optional) steps:</p><ol><li>Changing the version in the code</li></ol><p>The code of the software platform itself usually has some reference to the
release. As we are creating a new release, this code needs to be updated.</p><ol start="2"><li>Creating a release branch</li></ol><p>For example <code>5.0.x</code> branch, so that other patch releases fork from there.
This branch needs to be created locally and pushed to the public repository.</p><ol start="3"><li>Creating a release git tag</li></ol><p>Creating the git tag and pushing it to the repository.</p><ol start="4"><li>Publishing a github release.</li></ol><p>We can do all this in one go with the following command:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./release.py </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --version </span><span class="token number" style="color:rgb(247, 140, 108)">5.0</span><span class="token plain">.0-beta.1 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --change-version </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --base-branch master </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --create-branch </span><span class="token number" style="color:rgb(247, 140, 108)">5.0</span><span class="token plain">.x </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --create-tag </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --release-title </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;5.0.0-beta.1 release&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --generate-release-notes </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --prerelease </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --create-release </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --path </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">/election-portal</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Also note that the <code>release.py</code> script in this configuration will:</p><ul><li>Stash your current changes in the <code>election-portal</code> repository</li><li>Remove all untracked files and directories (except those ignored by <code>.gitignore</code>)</li><li>Create a branch from origin/master, commit the changes and force push it to
the origin</li><li>Create tag from the just created commit and force push it to the origin</li><li>Create a release from the just created tag</li></ul><p>If you are releasing in an existing branch for a minor release, the command
would probably be more similar to:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./release.py </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --version </span><span class="token number" style="color:rgb(247, 140, 108)">5.0</span><span class="token plain">.0-beta.2 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --change-version </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --base-branch </span><span class="token number" style="color:rgb(247, 140, 108)">5.0</span><span class="token plain">.x </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --push-current-branch </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --create-tag </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --release-title </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;5.0.0-beta.2 release&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --previous-tag-name </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;5.0.0-beta.1&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --generate-release-notes </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --create-release </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --path </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">/election-portal</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Note that here:</p><ul><li>We are not creating the <code>5.0.x</code>  branch, because it already exists. Instead,
we are pushing current branch (5.0.x, set with <code>--base-branch 5.0.x</code>).</li><li>We are specifying <code>--previous-tag-name &#x27;5.0.0-beta.1&#x27;</code>, because otherwise the
github-generated release notes would use the most recent release as a base, and
that might not be what we want as the previous release might have been for
a different major version.</li></ul><p>To do a full plataform release, these are all the projects that need to be
released using the previous command:</p><ul><li>common-ui</li><li>admin-console</li><li>election-portal</li><li>voting-booth</li><li>ballot-box</li><li>deployment-tool</li><li>tally-methods</li><li>tally-pipes</li><li>election-verifier</li><li>frestq</li><li>election-orchestra</li><li>iam</li><li>misc-tools</li><li>mixnet</li><li>documentation</li><li>ballot-verifier</li><li>release-tool</li></ul><p>Note that the order listed above is important for automatic unit tests. For
example, <code>election-verifier</code> uses <code>tally-pipes</code>, which in turn depends on
<code>tally-methods</code>. Please do the releasing in order. If you don&#x27;t, you&#x27;ll get some
github actions failed. If this happens, just rerun the github actions after all
the releases have been done and that should fix the problem.</p><p>You can automate the release of all these repositories with a script like:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">REPOS</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">common-ui admin-console election-portal voting-booth ballot-box deployment-tool tally-methods tally-pipes election-verifier frestq election-orchestra iam misc-tools mixnet documentation ballot-verifier release-tool</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token for-or-select variable" style="color:rgb(191, 199, 213)">i</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">$REPOS</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">do</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ./release.py </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        --version </span><span class="token number" style="color:rgb(247, 140, 108)">6.1</span><span class="token plain">.0 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        --change-version </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        --base-branch </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;6.1.x&#x27;</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;6.0.x&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        --push-current-branch </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        --create-tag </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        --release-title </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;6.1.0 release&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        --previous-tag-name </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;6.0.3&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        --generate-release-notes </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        --create-release </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        --path </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">/</span><span class="token variable" style="color:rgb(191, 199, 213)">$i</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">done</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Note that we specified multiple branch names with <code>--base-branch</code>. This is
because in some of the repositories, there might not be any new commits or they
might be in the previous <code>6.0.x</code> branch. The first name of the base-branch will
always indicate the final branch to push, and it will use that branch as a base
if it does exist. If it&#x27;s not yet created, the release script will try to use
the other given branch names as a base, in order.</p><header><h1>Release Testing and version schedule</h1></header><p>For any major release, first a <code>&lt;major&gt;.&lt;minor&gt;.&lt;patch&gt;-beta.1</code> should be
created. After this has been done for the whole platform:</p><ol><li>All automatic unit testing should pass.</li><li>All <a href="/documentation/docs/testing/e2e">E2E integration tests</a> should pass.</li><li>Enough time for doing additional manual testing bug fixing should be
allocated.</li></ol><p>After this bugfixing, either a new beta or a final release should be created,
with all the bugfixes being applied in the release branch which should be
called <code>&lt;major&gt;.&lt;minor&gt;.x</code>. This should happen after 7 or more days after the
initial beta. A second beta (or even a third one and so on) can happen if the
previous beta release was not deemed to be stable enough even after some
bugfixes have been applied.</p><p>Also, even if no bugfix is applied, a new final (with <code>--prerelease</code>) release
should be created, named <code>&lt;major&gt;.&lt;minor&gt;.0</code>, with patch version <code>0</code>. </p><header><h1>Future</h1></header><p>In the future, we should automate the release management command and include
them within each different project instead of having a separate repository to
handle this.</p><p>Some tools we might take a look at to do so:</p><ul><li><a href="https://github.com/marketplace/actions/automatic-releases" target="_blank" rel="noopener noreferrer">https://github.com/marketplace/actions/automatic-releases</a></li></ul><p>Also we should automate the releases for the documentation itself, allowing
having multiple version of the documentation, to match with the releases.</p></div><footer class="docusaurus-mt-lg"><div class="row"><div class="col"><a href="https://github.com/sequentech/documentation/edit/master/docs/contribute/release-howto.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/documentation/docs/contribute/release-lifecycle"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Release lifecycle and cadence</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Sequent</div></div></div></footer></div>
<script src="/documentation/assets/js/runtime~main.d66f2ac7.js"></script>
<script src="/documentation/assets/js/main.17bc2a39.js"></script>
</body>
</html>