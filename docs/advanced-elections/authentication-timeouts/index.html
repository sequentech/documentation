<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<title data-react-helmet="true">Authentication Timeouts | admin-manual</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://your-docusaurus-test-site.com/admin-manual/docs/advanced-elections/authentication-timeouts"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Authentication Timeouts | admin-manual"><meta data-react-helmet="true" name="description" content="Introduction"><meta data-react-helmet="true" property="og:description" content="Introduction"><link data-react-helmet="true" rel="shortcut icon" href="/admin-manual/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://your-docusaurus-test-site.com/admin-manual/docs/advanced-elections/authentication-timeouts"><link data-react-helmet="true" rel="alternate" href="https://your-docusaurus-test-site.com/admin-manual/docs/advanced-elections/authentication-timeouts" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://your-docusaurus-test-site.com/admin-manual/docs/advanced-elections/authentication-timeouts" hreflang="x-default"><link rel="stylesheet" href="/admin-manual/assets/css/styles.c36e509a.css">
<link rel="preload" href="/admin-manual/assets/js/runtime~main.73bf6be1.js" as="script">
<link rel="preload" href="/admin-manual/assets/js/main.c8b16299.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/admin-manual/"><img src="/admin-manual/img/nvotes_logo.png" alt="nVotes" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/admin-manual/img/nvotes_logo.png" alt="nVotes" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Admin Manual</b></a><a class="navbar__item navbar__link navbar__link--active" href="/admin-manual/docs/deployment/guide">Docs</a><a class="navbar__item navbar__link" href="/admin-manual/docs/file-formats/introduction">File Formats</a></div><div class="navbar__items navbar__items--right"><a href="https://nvotes.com/blog/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/agoravoting/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://nvotes.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Powered By nVotes<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Deployment</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Translation</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Election Testing</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Advanced Topics</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/admin-manual/docs/advanced-elections/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/admin-manual/docs/advanced-elections/election-creation">Election Creation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/admin-manual/docs/advanced-elections/parent-and-children-elections">Parent &amp; Children Elections</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/admin-manual/docs/advanced-elections/write-ins">Write-ins</a></li><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/admin-manual/docs/advanced-elections/authentication-timeouts">Authentication Timeouts</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Integrations</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Contribute</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1>Authentication Timeouts</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="introduction"></a>Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">#</a></h2><p>In this document you can learn about how does the authentication session
lifetime works in nVotes voting platform and how to configure it.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="voter-session-lifetime"></a>Voter session lifetime<a class="hash-link" href="#voter-session-lifetime" title="Direct link to heading">#</a></h2><p>When a voter logs in, a series of cookies are created to maintain the
authentication credentials for a period of time. The authentication token is
saved in one of these cookies.</p><p>The <code>config.yml</code> YAML configuration file contain to which we refer multiple
times in the <a href="/admin-manual/docs/deployment/guide">deployment guide</a> contains two variables
to configure the voter autentication session:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="configauthapiauth_token_expiration_seconds"></a>config.authapi.auth_token_expiration_seconds<a class="hash-link" href="#configauthapiauth_token_expiration_seconds" title="Direct link to heading">#</a></h3><p>Default value: <code>600</code> (seconds).</p><p>Number of seconds after which an authentication token expires. This
configuration is used by the <code>agora-elections</code> and <code>authapi</code> backends in
voter-related authenticated actions. The backend verifies the creation time of
the voter-authentication token, and if it&#x27;s larger than the value set in this
setting, then it&#x27;s an expired token.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="configagora_guicookies_expires"></a>config.agora_gui.cookies_expires<a class="hash-link" href="#configagora_guicookies_expires" title="Direct link to heading">#</a></h3><p>Default value: <code>10</code> (minutes).</p><p>Login session cookies expiration in minutes. During login, the voter session
cookies are set with this expiration time. After the cookies expires, the
browser automatically erases these cookies from memory. This means that if after
login the voter tries to cast a vote, it won&#x27;t succeed because the browser has
lost access to a valid authentication credential for voting.</p><p>If this setting is set to <code>false</code> to be unlimited. This setting does not apply
to <code>agora-gui-admin</code> cookies (which use the value from
<code>config.authapi.auth_token_expiration_seconds</code>), except if this setting is
set to <code>false</code> then the expiration of cookies will be set the same value as for
other agora-gui modules (unlimited).</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>These two variables should in general be synced. <code>auth_token_expiration_seconds</code>
configures the backend and <code>cookies_expires</code> configures the frontend, but if
they are not in sync it doesn&#x27;t make much sense. That&#x27;s why the default is
<code>600</code> seconds (10 minutes) for <code>auth_token_expiration_seconds</code> and 10 minutes
for <code>cookies_expires</code>.</p></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Currently, there&#x27;s no alerting to the user about the session being ended or
expired, and there&#x27;s not even button to logout and remove the cookies for the
voter. This planned to be resolved soon in version 6.0.0.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="admin-users-session-lifetime"></a> Admin users session lifetime<a class="hash-link" href="#admin-users-session-lifetime" title="Direct link to heading">#</a></h2><p>The administrative interface (typically accessed using the <code>/admin/login</code> path)
has its own configuration for timeouts in the <code>config.yml</code> separated from the
voter timeouts.</p><p>The timeout of the backends and for the frontend is configured in a single
variable: <code>config.authapi.admin_auth_token_expiration_seconds</code>, which is very
similar to <code>config.authapi.auth_token_expiration_seconds</code> but applies to the
administrative interface and also applies to the cookies of the admin interface,
except for when <code>config.agora_gui.cookies_expires</code> is set to <code>false</code>, in which
case the cookie does not expire, but the backend will still deem old
authentication tokens expired anyway.</p><p>The administrative interface has some other differences with regards to the
voter interface:</p><ul><li>It renovates its authentication token twice for each period of
<code>config.authapi.admin_auth_token_expiration_seconds</code> when the browser tab is
not
<a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/hidden" target="_blank" rel="noopener noreferrer">hidden</a>.
This means that even if the expiration is set to i.e. 600 seconds (or 10
minutes), if the admin browser is visible and active, the session will not
close.</li><li>It automatically detects when an HTTP request has been rejected by the backend
because the admin authentication token has expired, and automatically logs out
in that scenario.</li><li>It does contain a button through which the admin user can explicitly log out
of the admin interface, erasing the admin authentication cookies from the
browser.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="otp-token-expiration"></a>OTP token expiration<a class="hash-link" href="#otp-token-expiration" title="Direct link to heading">#</a></h2><p>Independently if it&#x27;s used for authentication of voters or administrators,
there&#x27;s another <code>config.yml</code> that can apply to both. When
<a href="/admin-manual/docs/file-formats/election-creation-json#census-auth_method">authentication-method</a>
is either <code>email-otp</code> or <code>sms-otp</code>, the One Time Tokens (OTPs) received by the
person being authenticated have an timeout after a given period of time, which
can be configured in the <code>config.authapi.sms_otp.expire_seconds</code> setting in
<code>config.yml</code> deployment configuration file.</p></div><footer class="docusaurus-mt-lg"><div class="row"><div class="col"><a href="https://github.com/agoravoting/admin-manual/edit/master/docs/advanced-elections/authentication-timeouts.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/admin-manual/docs/advanced-elections/write-ins"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Write-ins</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/admin-manual/docs/integrations/smart-link-auth"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">SmartLink Authentication »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link">Introduction</a></li><li><a href="#voter-session-lifetime" class="table-of-contents__link">Voter session lifetime</a><ul><li><a href="#configauthapiauth_token_expiration_seconds" class="table-of-contents__link">config.authapi.auth_token_expiration_seconds</a></li><li><a href="#configagora_guicookies_expires" class="table-of-contents__link">config.agora_gui.cookies_expires</a></li></ul></li><li><a href="#admin-users-session-lifetime" class="table-of-contents__link"> Admin users session lifetime</a></li><li><a href="#otp-token-expiration" class="table-of-contents__link">OTP token expiration</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/admin-manual/docs/deployment/guide">Deployment</a></li><li class="footer__item"><a class="footer__link-item" href="/admin-manual/docs/translation/guide">Translation</a></li><li class="footer__item"><a class="footer__link-item" href="/admin-manual/docs/testing/bulk">Election Testing</a></li><li class="footer__item"><a class="footer__link-item" href="/admin-manual/docs/advanced-elections/introduction">Advanced Topics</a></li><li class="footer__item"><a class="footer__link-item" href="/admin-manual/docs/contribute/guide">Contribute</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/agoravoting" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discord.gg/BSqF8Cbr" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/nvotes_com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://nvotes.com/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/agoravoting/admin-manual" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 nVotes</div></div></div></footer></div>
<script src="/admin-manual/assets/js/runtime~main.73bf6be1.js"></script>
<script src="/admin-manual/assets/js/main.c8b16299.js"></script>
</body>
</html>