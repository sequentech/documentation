"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[89],{3905:(e,t,n)=>{n.d(t,{Zo:()=>r,kt:()=>p});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var d=a.createContext({}),c=function(e){var t=a.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},r=function(e){var t=c(e.components);return a.createElement(d.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,d=e.parentName,r=s(e,["components","mdxType","originalType","parentName"]),u=c(n),p=i,g=u["".concat(d,".").concat(p)]||u[p]||h[p]||o;return n?a.createElement(g,l(l({ref:t},r),{},{components:n})):a.createElement(g,l({ref:t},r))}));function p(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,l=new Array(o);l[0]=u;var s={};for(var d in t)hasOwnProperty.call(t,d)&&(s[d]=t[d]);s.originalType=e,s.mdxType="string"==typeof e?e:i,l[1]=s;for(var c=2;c<o;c++)l[c]=n[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},9028:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var a=n(3117),i=(n(7294),n(3905));const o={sidebar_position:10,title:"Scheduled Events Guide"},l="Scheduled Events Guide",s={unversionedId:"general/guides/scheduled-events/scheduled-events",id:"general/guides/scheduled-events/scheduled-events",title:"Scheduled Events Guide",description:"You can automate events such as the start and the stop date time of an election",source:"@site/docs/general/guides/scheduled-events/scheduled-events.md",sourceDirName:"general/guides/scheduled-events",slug:"/general/guides/scheduled-events/",permalink:"/documentation/docs/general/guides/scheduled-events/",draft:!1,editUrl:"https://github.com/sequentech/documentation/edit/master/docs/general/guides/scheduled-events/scheduled-events.md",tags:[],version:"current",sidebarPosition:10,frontMatter:{sidebar_position:10,title:"Scheduled Events Guide"},sidebar:"generalSidebar",previous:{title:"Cron Tasks Guide",permalink:"/documentation/docs/general/guides/cron-tasks/"},next:{title:"Concepts",permalink:"/documentation/docs/general/concepts/"}},d={},c=[{value:"Technical\xa0Implementation",id:"technicalimplementation",level:2},{value:"Election JSON Configuration",id:"election-json-configuration",level:2},{value:"Scheduled events in the Election Dashboard",id:"scheduled-events-in-the-election-dashboard",level:2},{value:"Configure Scheduled events: modal dialog",id:"configure-scheduled-events-modal-dialog",level:2},{value:"Configure Scheduled events: dashboard and activity log",id:"configure-scheduled-events-dashboard-and-activity-log",level:2}],r={toc:c};function h(e){let{components:t,...o}=e;return(0,i.kt)("wrapper",(0,a.Z)({},r,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"scheduled-events-guide"},"Scheduled Events Guide"),(0,i.kt)("p",null,"You can automate events such as the start and the stop date time of an election\nwith scheduled events. These automations are not final, and you can change the\ndatetimes or even remove the automated datetime at any time. Of course, all\nthese changes will be reflected in the activity log of the election and these\nimportant dates appear in the election dashboard."),(0,i.kt)("h2",{id:"technicalimplementation"},"Technical\xa0Implementation"),(0,i.kt)("p",null,"Scheduled events are setup with django ",(0,i.kt)("a",{parentName:"p",href:"https://docs.celeryq.dev/en/stable/index.html"},"celery"),". A task is created in celery to\nbe run at a specific date and time. This task is persisted using ",(0,i.kt)("a",{parentName:"p",href:"https://www.rabbitmq.com/documentation.html"},"rabbitmq"),"."),(0,i.kt)("p",null,"The scheduled events can be re-scheduled and even cancelled as you will see in\nlater sections. Since we store the task id for each scheduled event within the\nAuthEvent model, we can revoke any previously scheduled task when re-scheduling\nor cancelling an event."),(0,i.kt)("p",null,"Once the task is called at the scheduled time, it will be executed and the\nelection start or stop will thus happen ",(0,i.kt)("strong",{parentName:"p"},"just moments after")," the scheduled\ntime - typically less than a second. But that also depends on the number of\nchildren events, which can take a while more since each child election is\nstarted/stopped separatedly."),(0,i.kt)("h2",{id:"election-json-configuration"},"Election JSON Configuration"),(0,i.kt)("p",null,"You can configure the scheduled events in the Election Configuration JSON using\nthe ",(0,i.kt)("a",{parentName:"p",href:"../../reference/election-creation-json#election-scheduled_events"},(0,i.kt)("inlineCode",{parentName:"a"},"scheduled_events")),"\nfield:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    //\xa0... rest of the election configuration...\n    "scheduled_events": {\n        "start_voting": {\n            "event_at": "2023-09-12T09:26:00+00:00"\n        },\n        "end_voting": {\n            "event_at": "2023-09-13T09:26:00+00:00"\n        }\n    },\n    //\xa0... rest of the election configuration...\n}\n')),(0,i.kt)("h2",{id:"scheduled-events-in-the-election-dashboard"},"Scheduled events in the Election Dashboard"),(0,i.kt)("p",null,"The configuration of scheduled events appears in the election dashboard. On the\none hand, if there's any scheduled start or end of the voting period, it will\nappear highlighted."),(0,i.kt)("p",null,"On the other hand, at any time you can change and reconfigure the scheduled\nevents from the Dashboard ",(0,i.kt)("inlineCode",{parentName:"p"},"Actions")," dropdown menu."),(0,i.kt)("p",null,"Both are being highlighted by red arrows in the following image:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Scheduled events in the Election Dashboard",src:n(3783).Z,width:"2116",height:"1314"})),(0,i.kt)("h2",{id:"configure-scheduled-events-modal-dialog"},"Configure Scheduled events: modal dialog"),(0,i.kt)("p",null,"Once you click in the Election Dashbaord ",(0,i.kt)("inlineCode",{parentName:"p"},"Actions")," >\n",(0,i.kt)("inlineCode",{parentName:"p"},"Configure scheduled events")," dropdown menu item, a modal dialog will appear in\nwhich you can configure the dates in which the election will be automatically\nstarted or stopped of the election. This dialog can be launched at any time,\nallowing you to reschedule or even cancel a previously schedule election start\nor stop. To cancel an event, just click to uncheck the checkbox."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Scheduled events modal dialog",src:n(9942).Z,width:"1382",height:"940"})),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Scheduled events modal dialog with date selector",src:n(6167).Z,width:"1382",height:"1150"})),(0,i.kt)("p",null,"Once you click in the ",(0,i.kt)("inlineCode",{parentName:"p"},"Confirm to change scheduled events")," button, the dialog\nwill close and a notification will appear in the top of the screen saying the\nconfiguration was successful:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Scheduled events: change success notification",src:n(3907).Z,width:"2128",height:"1398"})),(0,i.kt)("p",null,"Additionally, the configuration box that shows the Election Status and some\nother election information will be automatically updated showing the updated\n",(0,i.kt)("inlineCode",{parentName:"p"},"Scheduled Start")," and/or ",(0,i.kt)("inlineCode",{parentName:"p"},"Scheduled Stop")," dates. This might take a few seconds\nto appear since it is updated using polling."),(0,i.kt)("p",null,"Please notice that even though the datetime selector uses the browser's local\ntimezone, the dialog converts it to UTC timezone and thus scheduled events\ndatetime are thus shown in UTC if configured using the modal dialog."),(0,i.kt)("h2",{id:"configure-scheduled-events-dashboard-and-activity-log"},"Configure Scheduled events: dashboard and activity log"),(0,i.kt)("p",null,"When an scheduled event such as the end of the voting period happens, the\nelection status changes appropriately automatically. For example, the election\nstatus of the election might change from ",(0,i.kt)("inlineCode",{parentName:"p"},"started")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"stopped"),". If you have the\nelection dashboard open in your browser, it will take a few seconds to refresh\nthis information automatically. "),(0,i.kt)("p",null,"Additionally, all and any change of election scheduled events configuration or\nchange of status by the execution of the task related to an scheduled event will\nappear in the election's activity log screen:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Scheduled events: activity log",src:n(2928).Z,width:"2128",height:"1398"})),(0,i.kt)("p",null,"Note this screnshot shows:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"That there are different scheduled events configuration changes being logged,\nincluding the revokation of tasks related to previously scheduled events."),(0,i.kt)("li",{parentName:"ol"},"The successful execution of any scheduled event, in relation to the user\nthat scheduled such execution."),(0,i.kt)("li",{parentName:"ol"},"With any scheduled task or revokation of task, the associated task id is ",(0,i.kt)("h2",{parentName:"li",id:"being-logged"},"being logged."))))}h.isMDXComponent=!0},2928:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/activity-log-b6a24128e012ec9b12ea2f6af09c3e9c.png"},6167:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/dialog-selector-1f03e5b149ed6f6acf68d3bc0d233ef8.png"},9942:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/dialog-57c6d739de731154cbc8b57f4e118668.png"},3783:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/election-dashboard-e728a0835fb1cd53c75ab1b7e2215f0b.png"},3907:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/notification-e94c92b0e6c4ec5ad0a3558ae6716e4f.png"}}]);