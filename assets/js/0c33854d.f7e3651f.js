"use strict";(self.webpackChunkadmin_manual=self.webpackChunkadmin_manual||[]).push([[63],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return d}});var a=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function r(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=a.createContext({}),p=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},u=function(e){var n=p(e.components);return a.createElement(s.Provider,{value:n},e.children)},g={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},c=a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,u=r(e,["components","mdxType","originalType","parentName"]),c=p(t),d=i,m=c["".concat(s,".").concat(d)]||c[d]||g[d]||o;return t?a.createElement(m,l(l({ref:n},u),{},{components:t})):a.createElement(m,l({ref:n},u))}));function d(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var o=t.length,l=new Array(o);l[0]=c;var r={};for(var s in n)hasOwnProperty.call(n,s)&&(r[s]=n[s]);r.originalType=e,r.mdxType="string"==typeof e?e:i,l[1]=r;for(var p=2;p<o;p++)l[p]=t[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}c.displayName="MDXCreateElement"},7135:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return r},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return u},default:function(){return c}});var a=t(7462),i=t(3366),o=(t(7294),t(3905)),l=["components"],r={id:"guide",title:"Translation Guide",sidebar_label:"Translation Guide",slug:"/translation/guide"},s=void 0,p={unversionedId:"translation/guide",id:"translation/guide",isDocsHomePage:!1,title:"Translation Guide",description:"This document describes how to translate the Agora Voting project to a new",source:"@site/docs/translation/guide.md",sourceDirName:"translation",slug:"/translation/guide",permalink:"/admin-manual/docs/translation/guide",editUrl:"https://github.com/agoravoting/admin-manual/edit/master/docs/translation/guide.md",tags:[],version:"current",frontMatter:{id:"guide",title:"Translation Guide",sidebar_label:"Translation Guide",slug:"/translation/guide"},sidebar:"docsSidebar",previous:{title:"Browsers and Cookies",permalink:"/admin-manual/docs/deployment/browsers-and-cookies"},next:{title:"Bulk Election Testing",permalink:"/admin-manual/docs/testing/bulk"}},u=[{value:"Introduction",id:"introduction",children:[]},{value:"How to translate <code>agora-gui</code>",id:"how-to-translate-agora-gui",children:[{value:"Step 1. Writing the translations",id:"step-1-writing-the-translations",children:[]},{value:"Step 2. Building the translations",id:"step-2-building-the-translations",children:[]},{value:"Step 3. Translation deployment and configuration",id:"step-3-translation-deployment-and-configuration",children:[]},{value:"Step 4. Send the Pull Request",id:"step-4-send-the-pull-request",children:[]}]},{value:"How to translate <code>agora-results</code>",id:"how-to-translate-agora-results",children:[{value:"Step 1. Writing the translations",id:"step-1-writing-the-translations-1",children:[]},{value:"Step 2. Building the translations",id:"step-2-building-the-translations-1",children:[]},{value:"Step 3. Choosing the PDF results language",id:"step-3-choosing-the-pdf-results-language",children:[]},{value:"Step 4. Send the Pull Request",id:"step-4-send-the-pull-request-1",children:[]}]}],g={toc:u};function c(e){var n=e.components,t=(0,i.Z)(e,l);return(0,o.kt)("wrapper",(0,a.Z)({},g,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"This document describes how to translate the Agora Voting project to a new\nlanguage."),(0,o.kt)("h2",{id:"introduction"},"Introduction"),(0,o.kt)("p",null,"The Agora Voting project user interface is written in javascript using Angular 1\nand uses ",(0,o.kt)("a",{parentName:"p",href:"https://www.i18next.com/"},"i18next")," and\n",(0,o.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/ng-i18next"},"ng-i18next")," for internationalization\n(i18n for short)."),(0,o.kt)("p",null,"The user interface is divided in 4 different repositories:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"agora-gui-common"),": A common library used by the other three."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"agora-gui-admin"),": The election administrator interface."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"agora-gui-elections"),": The public election interface."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"agora-gui-booth"),": The voting booth interface.")),(0,o.kt)("p",null,"Each repository has its own set of translation files. The format of these files\nis in JSON and is ",(0,o.kt)("a",{parentName:"p",href:"https://www.i18next.com/misc/json-format#i-18-next-json-v1"},"roughly defined here (JSON v1 i18next format)"),"."),(0,o.kt)("p",null,"There's also translation files in ",(0,o.kt)("strong",{parentName:"p"},"agora-results"),", currently just for\ngenerating PDF results in the chosen language. These work with ",(0,o.kt)("inlineCode",{parentName:"p"},"gettext")," ",(0,o.kt)("inlineCode",{parentName:"p"},".po"),"\nand ",(0,o.kt)("inlineCode",{parentName:"p"},".pot")," files. "),(0,o.kt)("p",null,"This guide is grouped in two sections:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"How to translate ",(0,o.kt)("inlineCode",{parentName:"li"},"agora-gui-*"),"."),(0,o.kt)("li",{parentName:"ol"},"How to translate ",(0,o.kt)("inlineCode",{parentName:"li"},"agora-results"),".")),(0,o.kt)("h2",{id:"how-to-translate-agora-gui"},"How to translate ",(0,o.kt)("inlineCode",{parentName:"h2"},"agora-gui")),(0,o.kt)("h3",{id:"step-1-writing-the-translations"},"Step 1. Writing the translations"),(0,o.kt)("p",null,"The English version of the translation JSON files is usually the most up to\ndate, and it is the most international language. For these reasons, to create\nyour translation we recommend to base it on the English JSON file for each\nrepository. This English base translation is located in the ",(0,o.kt)("inlineCode",{parentName:"p"},"locales/en.json"),"\nin each repository:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/agoravoting/agora-gui-common/blob/master/locales/en.json"},"agora-gui-common/locales/en.json")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/agoravoting/agora-gui-admin/blob/master/locales/en.json"},"agora-gui-admin/locales/en.json")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/agoravoting/agora-gui-elections/blob/master/locales/en.json"},"agora-gui-elections/locales/en.json")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/agoravoting/agora-gui-booth/blob/master/locales/en.json"},"agora-gui-booth/locales/en.json"))),(0,o.kt)("p",null,"To create a translation, just copy each of those files into the same ",(0,o.kt)("inlineCode",{parentName:"p"},"locales/"),"\ndirectory as a new file with a name following the pattern\n",(0,o.kt)("inlineCode",{parentName:"p"},"<language-code>.json"),". The language code for each language is defined in\nISO 639-1 and a ",(0,o.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes"},"table of codes can be found in Wikipedia"),". For example, the language code for Spanish is ",(0,o.kt)("inlineCode",{parentName:"p"},"es"),"\nand for German is ",(0,o.kt)("inlineCode",{parentName:"p"},"de"),"."),(0,o.kt)("p",null,"Currently the Agora Voting Project contains translations for the following\nlanguages:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Catalan (ca)"),(0,o.kt)("li",{parentName:"ul"},"English (en)"),(0,o.kt)("li",{parentName:"ul"},"Finnish (fi)"),(0,o.kt)("li",{parentName:"ul"},"Galician (gl)"),(0,o.kt)("li",{parentName:"ul"},"Spanish (es)"),(0,o.kt)("li",{parentName:"ul"},"Swedish (sv)")),(0,o.kt)("h3",{id:"step-2-building-the-translations"},"Step 2. Building the translations"),(0,o.kt)("p",null,"Once we have written the translation files and put them in the corresponding\n",(0,o.kt)("inlineCode",{parentName:"p"},"locales/")," directories with the proper file names, we are not finished yet. We\nhave to modify the building system to incorporate these files."),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"agora-gui-*")," repositories use the ",(0,o.kt)("a",{parentName:"p",href:"https://gruntjs.com/"},"GruntJS")," task\nrunner  for building and bundling the javascript code. In each of the\n",(0,o.kt)("inlineCode",{parentName:"p"},"agora-gui-*")," repositories you will find a top level file called ",(0,o.kt)("inlineCode",{parentName:"p"},"Gruntfile.js"),"\nthat we will need to modify."),(0,o.kt)("p",null,"The required modifications are pretty simple. Just search for the string\n",(0,o.kt)("inlineCode",{parentName:"p"},"locales/")," inside the file ",(0,o.kt)("inlineCode",{parentName:"p"},"Gruntfile.js")," and you will find usually one or two\nplaces where i18n files are processed. For example, in ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/agoravoting/agora-gui-common/blob/master/Gruntfile.js#L207"},"agora-gui-common/Gruntfile.js")," around line 207 you will find\nsomething like:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="agora-gui-common/Gruntfile.js fragment"',title:'"agora-gui-common/Gruntfile.js','fragment"':!0},'    "merge-json": {\n      main: {\n        files: {\n            "dist/locales/en.json": ["locales/en.json", "plugins/**/locales/en.json"],\n            "dist/locales/es.json": ["locales/es.json", "plugins/**/locales/es.json"],\n            "dist/locales/gl.json": ["locales/gl.json", "plugins/**/locales/gl.json"],\n            "dist/locales/sv.json": ["locales/sv.json", "plugins/**/locales/sv.json"],\n            "dist/locales/fi.json": ["locales/fi.json", "plugins/**/locales/fi.json"],\n            "dist/locales/ca.json": ["locales/ca.json", "plugins/**/locales/ca.json"]\n        }\n      }\n    },\n')),(0,o.kt)("p",null,"If you are adding a translation for Icelandic (",(0,o.kt)("inlineCode",{parentName:"p"},"is")," language code), you should\nadd the following line in between:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="agora-gui-common/Gruntfile.js fragment"',title:'"agora-gui-common/Gruntfile.js','fragment"':!0},'            "dist/locales/is.json": ["locales/is.json", "plugins/**/locales/is.json"],\n')),(0,o.kt)("p",null,"Ending up with the ",(0,o.kt)("inlineCode",{parentName:"p"},"merge-json")," task inside the file ",(0,o.kt)("inlineCode",{parentName:"p"},"Gruntfile.js")," being as\nfollows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="agora-gui-common/Gruntfile.js fragment" {7}',title:'"agora-gui-common/Gruntfile.js','fragment"':!0,"{7}":!0},'    "merge-json": {\n      main: {\n        files: {\n            "dist/locales/en.json": ["locales/en.json", "plugins/**/locales/en.json"],\n            "dist/locales/es.json": ["locales/es.json", "plugins/**/locales/es.json"],\n            "dist/locales/gl.json": ["locales/gl.json", "plugins/**/locales/gl.json"],\n            "dist/locales/is.json": ["locales/is.json", "plugins/**/locales/is.json"],\n            "dist/locales/sv.json": ["locales/sv.json", "plugins/**/locales/sv.json"],\n            "dist/locales/fi.json": ["locales/fi.json", "plugins/**/locales/fi.json"],\n            "dist/locales/ca.json": ["locales/ca.json", "plugins/**/locales/ca.json"]\n        }\n      }\n    },\n')),(0,o.kt)("p",null,"This ",(0,o.kt)("inlineCode",{parentName:"p"},"merge-json")," task joins the translation files for each language from the\n",(0,o.kt)("inlineCode",{parentName:"p"},"locales/")," directory and from the ",(0,o.kt)("inlineCode",{parentName:"p"},"plugins")," directory. "),(0,o.kt)("p",null,"You'll notice that the  string ",(0,o.kt)("inlineCode",{parentName:"p"},"locales/")," appears in another section inside the\nfile ",(0,o.kt)("inlineCode",{parentName:"p"},"Gruntfile.js"),", in the ",(0,o.kt)("inlineCode",{parentName:"p"},"uglify")," section around ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/agoravoting/agora-gui-common/blob/master/Gruntfile.js#L226"},"line 226"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="agora-gui-common/Gruntfile.js fragment" {15-17}',title:'"agora-gui-common/Gruntfile.js','fragment"':!0,"{15-17}":!0},"    uglify: {\n      main: {\n        options:{\n          mangle: false,\n          compress: {},\n          beautify: true\n        },\n        files: {\n          'dist/appCommon-v20.2.0.js': 'temp/app.js',\n          'dist/libCommon-v20.2.0.js': 'temp/lib.js',\n          'dist/libnocompat-v20.2.0.js': 'temp/libnocompat.js',\n          'dist/libcompat-v20.2.0.js': 'temp/libcompat.js',\n          'dist/avWidgets.js': 'avWidgets.js',\n\n          \"dist/locales/moment/es.js\": \"node_modules/moment/locale/es.js\",\n          \"dist/locales/moment/gl.js\": \"node_modules/moment/locale/gl.js\",\n          \"dist/locales/moment/ca.js\": \"node_modules/moment/locale/ca.js\"\n        }\n")),(0,o.kt)("p",null,"This is related to the usage of the ",(0,o.kt)("a",{parentName:"p",href:"https://momentjs.com/"},"momentjs")," library,\nused for internationalization of times and dates. You can add a new line there\nalso for loading the moment internationalization file for your language if there\nis one."),(0,o.kt)("p",null,"We have done this for the ",(0,o.kt)("inlineCode",{parentName:"p"},"agora-gui-common")," project. We would have to repeat\nthe process for the other three ",(0,o.kt)("inlineCode",{parentName:"p"},"agora-gui-*")," projects for which we are adding\ntranslation support for a new language."),(0,o.kt)("h3",{id:"step-3-translation-deployment-and-configuration"},"Step 3. Translation deployment and configuration"),(0,o.kt)("p",null,"We have now translated the interface to a new language and incorporated the\ntranslations in the building process. The next step is to configure our\ndeployment to include and use the new language translation."),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"To deploy the Agora Voting project, please follow the\n",(0,o.kt)("a",{parentName:"p",href:"../deployment/guide"},"Deployment Guide"),"."))),(0,o.kt)("p",null,"The configuration is fairly simple. In the ",(0,o.kt)("inlineCode",{parentName:"p"},"config.yml")," file inside the\n",(0,o.kt)("inlineCode",{parentName:"p"},"agora_gui")," section you can find the following configurations keys:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="config.yml fragment"',title:'"config.yml','fragment"':!0},"    # Default language of the application\n    language: en\n\n    # Forces the default language\n    forceLanguage: false\n\n    # Specifies the set language query string\n    detectLanguageQueryString: lang\n\n    # Specifies what translations will be available\n    languagesWhitelist:\n      - en\n      - es\n      - gl\n      - ca\n")),(0,o.kt)("p",null,"For example if you want to specify that the default language is going to be\nPolish  (",(0,o.kt)("inlineCode",{parentName:"p"},"po")," language code), you would change the ",(0,o.kt)("inlineCode",{parentName:"p"},"agora_gui.language")," key to\n",(0,o.kt)("inlineCode",{parentName:"p"},"po")," and add ",(0,o.kt)("inlineCode",{parentName:"p"},"po")," to the ",(0,o.kt)("inlineCode",{parentName:"p"},"languagesWhitelist"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="config.yml fragment" {2,16}',title:'"config.yml','fragment"':!0,"{2,16}":!0},"    # Default language of the application\n    language: po\n\n    # Forces the default language\n    forceLanguage: false\n\n    # Specifies the set language query string\n    detectLanguageQueryString: lang\n\n    # Specifies what translations will be available\n    languagesWhitelist:\n      - en\n      - es\n      - gl\n      - ca\n      - po\n")),(0,o.kt)("p",null,"If you are doing a deployment only in Polish, you could remove other languages\nfrom the whitelist so that the user won't be able to choose any other language: "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="config.yml fragment" {2,12}',title:'"config.yml','fragment"':!0,"{2,12}":!0},"    # Default language of the application\n    language: po\n\n    # Forces the default language\n    forceLanguage: false\n\n    # Specifies the set language query string\n    detectLanguageQueryString: lang\n\n    # Specifies what translations will be available\n    languagesWhitelist:\n      - po\n")),(0,o.kt)("p",null,"Or maybe you might want to support a secondary language (English for example)\nbut force the default language to be Polish. By default, the user interface will\ntry to detect the preferred language of the web browser, but this behaviour can\nbe overridden using the ",(0,o.kt)("inlineCode",{parentName:"p"},"agora_gui.forceLanguage")," setting:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="config.yml fragment" {5,13}',title:'"config.yml','fragment"':!0,"{5,13}":!0},"    # Default language of the application\n    language: po\n\n    # Forces the default language\n    forceLanguage: true\n\n    # Specifies the set language query string\n    detectLanguageQueryString: lang\n\n    # Specifies what translations will be available\n    languagesWhitelist:\n      - po\n      - en\n")),(0,o.kt)("p",null,"You might have integrated the Agora Voting project deployment with some other\nplatform. If voters access to the Agora Voting interface from some third-party\ninterface, this first interface might have some specific language configuration\nfor each user. When accessing to an Agora Voting deployment link from some other\nweb site, you can modify the access link to force a specific default language\nadding a query string such as ",(0,o.kt)("inlineCode",{parentName:"p"},"?lang=pl"),". The name of this URL query string\nparamenter is specified with the ",(0,o.kt)("inlineCode",{parentName:"p"},"agora_gui.detectLanguageQueryString"),"\nconfiguration  parameter."),(0,o.kt)("h3",{id:"step-4-send-the-pull-request"},"Step 4. Send the Pull Request"),(0,o.kt)("p",null,"We welcome your contributions. This is an open source project and we'll be happy\nto accept your pull request adding support for a new language or updating an\nexisting translation. Please ensure you read and follow the step in the\n",(0,o.kt)("a",{parentName:"p",href:"../contribute/guide"},"Contribution Guide")," to do so."),(0,o.kt)("h2",{id:"how-to-translate-agora-results"},"How to translate ",(0,o.kt)("inlineCode",{parentName:"h2"},"agora-results")),(0,o.kt)("h3",{id:"step-1-writing-the-translations-1"},"Step 1. Writing the translations"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"agora-results")," is written in Python and executes in the backend. It uses the\nstandard ",(0,o.kt)("a",{parentName:"p",href:"https://docs.python.org/3/library/gettext.html"},"gettext")," library for\ninternationalization in Python projects. We use\n",(0,o.kt)("a",{parentName:"p",href:"http://babel.pocoo.org/en/latest/"},"Babel")," for extracting i18n strings\nand for compiling them and loosely followed\n",(0,o.kt)("a",{parentName:"p",href:"https://www.mattlayman.com/blog/2015/i18n/"},"this guide"),"."),(0,o.kt)("p",null,"The i18n strings inside the code are directly in English language and located\ncurrently only the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/pdf.py"},(0,o.kt)("inlineCode",{parentName:"a"},"agora_results/pipes/pdf.py"))," file. The translation template is located in\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/agoravoting/agora-results/blob/master/agora_results/pipes/locale/pipes.pot"},(0,o.kt)("inlineCode",{parentName:"a"},"agora_results/pipes/locale/pipes.pot"))," and the translation for each language are\nto be located in a path following the pattern\n",(0,o.kt)("inlineCode",{parentName:"p"},"agora_results/pipes/locale/<lang-code>/LC_MESSAGES/pipes.po"),"."),(0,o.kt)("p",null,"To create a translation, just copy ",(0,o.kt)("inlineCode",{parentName:"p"},"agora_results/pipes/locale/pipes.pot"),"\ninto a new file following the previously mentioned pattern\n",(0,o.kt)("inlineCode",{parentName:"p"},"agora_results/pipes/locale/<lang-code>/LC_MESSAGES/pipes.po"),". The language code\nfor each language is defined in\nISO 639-1 and a ",(0,o.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes"},"table of codes can be found in Wikipedia"),". For example, the language code for Spanish is ",(0,o.kt)("inlineCode",{parentName:"p"},"es"),"\nand for German is ",(0,o.kt)("inlineCode",{parentName:"p"},"de"),"."),(0,o.kt)("p",null,"Currently ",(0,o.kt)("inlineCode",{parentName:"p"},"agora-results")," contains translations for the following languages:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"English (en, the default)"),(0,o.kt)("li",{parentName:"ul"},"Spanish (es)")),(0,o.kt)("h3",{id:"step-2-building-the-translations-1"},"Step 2. Building the translations"),(0,o.kt)("p",null,"Each time an i18n string is changed, removed or added to the code, you should\nrun the following command to update the translation template (the\n",(0,o.kt)("inlineCode",{parentName:"p"},"agora_results/pipes/locale/pipes.pot")," file):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"# run in the `agora-results` directory\npython setup.py extract_messages\n")),(0,o.kt)("p",null,"After updating a translation or adding a new one, you should rebuild the\ntranslation files. Even if translations are written in plaintext (",(0,o.kt)("inlineCode",{parentName:"p"},".po")," format),\nthey are used in compiled format, as this is the way the venerable ",(0,o.kt)("inlineCode",{parentName:"p"},"gettext"),"\nlibrary (+30 years old) works. This compilation can be done with the following\ncommand in the ",(0,o.kt)("inlineCode",{parentName:"p"},"agora-results")," directory:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"# run in the `agora-results` directory\npython setup.py compile_catalog\n")),(0,o.kt)("h3",{id:"step-3-choosing-the-pdf-results-language"},"Step 3. Choosing the PDF results language"),(0,o.kt)("p",null,"By default, the election results are shown in english. Of course, this can be\nchanged. The PDF election results are generated by ",(0,o.kt)("inlineCode",{parentName:"p"},"agora-results"),". The way to\napply any configuration to ",(0,o.kt)("inlineCode",{parentName:"p"},"agora-results")," is through the\n",(0,o.kt)("a",{parentName:"p",href:"../file-formats/election-creation-json#results-config-pipes"},"Results config pipes"),"."),(0,o.kt)("p",null,"By default, the language is English and the default election results config\npipes is the following:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="election_pipes.json fragment" {7}',title:'"election_pipes.json','fragment"':!0,"{7}":!0},'{\n  "version": "1.0",\n  "pipes": [\n    {\n      "type": "agora_results.pipes.pdf.configure_pdf",\n      "params": {\n        "languages": ["en"] \n      }\n    },\n    {\n      "type": "agora_results.pipes.results.do_tallies",\n      "params": {}\n    },\n    {\n      "type": "agora_results.pipes.sort.sort_non_iterative",\n      "params": {}\n    }\n  ]\n}\n')),(0,o.kt)("p",null,"You can specify the language of the PDF election results changing the\nhighlighted line. For example, if you want the election results in Spanish,\nthe line would be ",(0,o.kt)("inlineCode",{parentName:"p"},'"languages": ["es"]')," instead."),(0,o.kt)("h3",{id:"step-4-send-the-pull-request-1"},"Step 4. Send the Pull Request"),(0,o.kt)("p",null,"We welcome your contributions. This is an open source project and we'll be happy\nto accept your pull request adding support for a new language or updating an\nexisting translation. Please ensure you read and follow the step in the\n",(0,o.kt)("a",{parentName:"p",href:"../contribute/guide"},"Contribution Guide")," to do so."))}c.isMDXComponent=!0}}]);